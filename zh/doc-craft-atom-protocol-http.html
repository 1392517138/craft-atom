<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
	  	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	  	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	  	<link rel="icon" href="../favicon.ico" type="image/x-icon">
	  	<link rel="stylesheet" href="../css/craft.css">
	  	<link rel="stylesheet" href="../css/code.css">
		<script type="text/javascript" src="../js/jquery.js"></script>
		<script type="text/javascript" src="../js/craft_zh.js"></script>
		<script type="text/javascript" src="../js/rainbow.js"></script>
		<script type="text/javascript" src="../js/rainbow.generic.js"></script>
		<script type="text/javascript" src="../js/rainbow.java.js"></script>
		<title>文档：craft-atom-protocol-http</title>
	</head>

	<body>
		<div id="header" class="header"></div>
		
		<div id="center" class="center">
			<div id="content" class="content">
<h1>craft-atom-protocol-http</h1>
<div class="date">2014-07-02 mindwind</div>

<h3>简介</h3>
<p>
一个简单 http 协议实现，它实现了 <a href="doc-craft-atom-protocol" target="_blank">craft-atom-protocol</a> 定义的 api
</p>

<h3>入门</h3>
<p>
首先，我们看一个关于 http 请求解码和响应器编码的例子，如下：
</p>
<pre><code data-language="java">
public class NioHttpServerIoHandler extends AbstractIoHandler {
	
    @Override
    public void channelOpened(Channel&lt;byte[]&gt; channel) {
        ProtocolDecoder&lt;HttpRequest&gt; decoder = HttpCodecFactory.newHttpRequestDecoder();
        channel.setAttribute("decoder", decoder);
    }
	
    @Override
    public void channelRead(Channel&lt;byte[]&gt; channel, byte[] bytes) {
        ProtocolDecoder&lt;HttpRequest&gt; decoder = (ProtocolDecoder&lt;HttpRequest&gt;) channel.getAttribute("decoder");
        List&lt;HttpRequest&gt; requests = decoder.decode(bytes);
        
        // After handle the request, we should produce a response and send back to client.
        HttpResponse response = HttpResponses.new200Response("response content");
        ProtocolEncoder&lt;HttpResponse&gt; encoder = HttpCodecFactory.newHttpResponseEncoder(Charset.forName("utf-8"));
        byte[] bytes = encoder.encode(response);
        channel.write(bytes);
    }
}
</code></pre>
<p>
到目前我们仅仅实现了 http 请求解码和响应编码器，所以你只能用它来实现一个简单的 http 服务。
</p>
			</div>
		</div>
		
		<div id="footer" class="footer"></div>
	</body>
</html>